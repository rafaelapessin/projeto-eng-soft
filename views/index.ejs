<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agendamento Escolar</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
  <div class="container mt-4">
    <h1 class="text-center mb-4">Reservas de Salas e Laborat칩rios</h1>
    <a href="/nova" class="btn btn-primary mb-4">Nova Reserva</a>

    <% if (reservas.length === 0) { %>
      <div class="alert alert-info text-center">
        Nenhuma reserva cadastrada at칠 o momento.
      </div>
    <% } else { %>

      <form action="/excluir-todas" method="POST" class="mb-4 text-end">
        <button type="submit" class="btn btn-danger">Excluir Todas</button>
      </form>

      <!-- Laborat칩rio de Inform치tica -->
      <div class="mb-5">
        <h3 class="text-primary border-bottom pb-2 mb-3">
          游눹 Laborat칩rio de Inform치tica
        </h3>

        <% const reservasInfo = reservas.filter(r => r.sala.toLowerCase().includes("inform치tica")); %>

        <% if (reservasInfo.length === 0) { %>
          <p class="text-muted">Nenhuma reserva para este laborat칩rio.</p>
        <% } else { %>
          <% reservasInfo.forEach(reserva => { %>
            <div class="card mb-3 shadow-sm">
              <div class="card-body d-flex justify-content-between align-items-center flex-wrap" style="gap: 1rem;">
                <div>
                  <strong>Dia:</strong> <%= reserva.diaFormatado %> |
                  <strong>Aula:</strong> <%= reserva.aula %>춹 |
                  <strong>Professor:</strong> <%= reserva.professor %> |
                  <strong>Disciplina:</strong> <%= reserva.disciplina %> |
                  <strong>Turma:</strong> <%= reserva.turma %> 
                </div>
                <form action="/excluir/<%= reserva.id %>" method="POST" onsubmit="return confirm('Deseja realmente excluir esta reserva?')">
                  <button type="submit" class="btn btn-danger btn-sm">Excluir</button>
                </form>
              </div>
            </div>
          <% }) %>
        <% } %>
      </div>

      <!-- Laborat칩rio de Manuten칞칚o -->
      <div class="mb-5">
        <h3 class="text-success border-bottom pb-2 mb-3">
          游빓 Laborat칩rio de Manuten칞칚o
        </h3>

        <% const reservasManut = reservas.filter(r => r.sala.toLowerCase().includes("manuten칞칚o")); %>

        <% if (reservasManut.length === 0) { %>
          <p class="text-muted">Nenhuma reserva para este laborat칩rio.</p>
        <% } else { %>
          <% reservasManut.forEach(reserva => { %>
            <div class="card mb-3 shadow-sm">
              <div class="card-body d-flex justify-content-between align-items-center flex-wrap" style="gap: 1rem;">
                <div>
                  <strong>Sala:</strong> <%= reserva.sala %> |
                  <strong>Dia:</strong> <%= reserva.diaFormatado %> |
                  <strong>Aula:</strong> <%= reserva.aula %>춹 |
                  <strong>Turma:</strong> <%= reserva.turma %> |
                  <strong>Professor:</strong> <%= reserva.professor %> |
                  <strong>Disciplina:</strong> <%= reserva.disciplina %>
                </div>
                <form action="/excluir/<%= reserva.id %>" method="POST" onsubmit="return confirm('Deseja realmente excluir esta reserva?')">
                  <button type="submit" class="btn btn-danger btn-sm">Excluir</button>
                </form>
              </div>
            </div>
          <% }) %>
        <% } %>
      </div>

    <% } %>
  </div>
</body>
</html>
